/** layui-v2.3.0 MIT License By https://www.layui.com */
 ;layui.define(["laytpl","laypage","layer","form"],function(e){"use strict";var t=layui.$,a=layui.laytpl,i=layui.laypage,l=layui.layer,n=layui.form,r=layui.hint(),o=layui.device(),d={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var a=this;return a.config=t.extend({},a.config,e),a},on:function(e,t){return layui.onevent.call(this,s,e,t)}},c=function(){var e=this,t=e.config,a=t.id;return a&&(c.config[a]=t),{reload:function(t){e.reload.call(e,t)},getData:function(){e.getData.call(e)},getChangedData:function(){e.getChangedData.call(e)},config:t}},s="table",h=".layui-table",u="layui-hide",f="layui-none",y="layui-table-view",p=".layui-table-header",m=".layui-table-body",v=".layui-table-main",g=".layui-table-fixed",x=".layui-table-fixed-l",b=".layui-table-fixed-r",k=".layui-table-tool",C=".layui-table-page",w=".layui-table-sort",D="layui-table-edit",N="layui-table-control",T="layui-table-hover",A="_$$UUID$$_",M="DELETE",_="UPDATE",S="__$$ROWSPAN$$__",H="NEW",E="$$_TABLE_ROW_STATUS_$$",L=function(e){var t='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';return e=e||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return e.fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+t+' {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" align="center">','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},W=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),F=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',L(),"</div>",'<div class="layui-table-body layui-table-main">',W,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',L({fixed:!0}),"</div>",'<div class="layui-table-body">',W,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',L({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',W,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),z=t(window),Y=t(document),j=function(e){var a=this;a.index=++d.index,a.config=t.extend({},a.config,d.config,e),a.render()};j.prototype.config={limit:10,loading:!0,cellMinWidth:60,text:{none:"无数据"}},j.prototype.render=function(){var e=this,i=e.config;if(i.elem=t(i.elem),i.where=i.where||{},i.id=i.id||i.elem.attr("id"),i.request=t.extend({pageName:"page",limitName:"limit"},i.request),void 0!=i.pageable&&null!=i.pageable||(i.pageable=!0),i.response=t.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},i.response),"object"==typeof i.page&&(i.limit=i.page.limit||i.limit,i.limits=i.page.limits||i.limits,e.page=i.page.curr=i.page.curr||1,delete i.page.elem,delete i.page.jump),!i.elem[0])return e;e.setArea();var l=i.elem,n=l.next("."+y),r=e.elem=t(a(F).render({VIEW_CLASS:y,data:i,index:e.index}));if(i.index=e.index,n[0]&&n.remove(),l.after(r),e.layHeader=r.find(p),e.layMain=r.find(v),e.layBody=r.find(m),e.layFixed=r.find(g),e.layFixLeft=r.find(x),e.layFixRight=r.find(b),e.layTool=r.find(k),e.layPage=r.find(C),e.layTool.html(a(t(i.toolbar).html()||"").render(i)),i.height&&e.fullSize(),i.cols.length>1){var o=e.layFixed.find(p).find("th");o.height(e.layHeader.height()-1-parseFloat(o.css("padding-top"))-parseFloat(o.css("padding-bottom")))}e.pullData(e.page),e.events()},j.prototype.initOpts=function(e){var t=this,a=(t.config,{checkbox:48,space:15,numbers:40});e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||a[e.type])},j.prototype.setArea=function(){var e=this,t=e.config,a=0,i=0,l=0,n=0,r=t.width||function(){var e=function(a){var i,l;a=a||t.elem.parent(),i=a.width();try{l="none"===a.css("display")}catch(n){}return!a[0]||i&&!l?i:e(a.parent())};return e()}();e.eachCols(function(){a++}),r-=function(){return"line"===t.skin||"nob"===t.skin?2:a+1}(),layui.each(t.cols,function(t,a){layui.each(a,function(t,l){var o;return l?(e.initOpts(l),o=l.width||0,void(l.colspan>1||(/\d+%$/.test(o)?l.width=o=Math.floor(parseFloat(o)/100*r):o||(l.width=o=0,i++),n+=o))):void a.splice(t,1)})}),e.autoColNums=i,r>n&&i&&(l=(r-n)/i),layui.each(t.cols,function(e,a){layui.each(a,function(e,a){var i=a.minWidth||t.cellMinWidth;a.colspan>1||0===a.width&&(a.width=Math.floor(l>=i?l:i))})}),t.height&&/^full-\d+$/.test(t.height)&&(e.fullHeightGap=t.height.split("-")[1],t.height=z.height()-e.fullHeightGap)},j.prototype.reload=function(e){var a=this;a.config.data&&a.config.data.constructor===Array&&delete a.config.data,a.config=t.extend({},a.config,e),a.render()},j.prototype.page=1,j.prototype.pullData=function(e,a){var i=this,n=i.config,r=n.request,o=n.response,d=function(){"object"==typeof n.initSort&&i.sort(n.initSort.field,n.initSort.type)};if(i.startTime=(new Date).getTime(),n.url){var c={};n.pageable&&(c[r.pageName]=e,c[r.limitName]=n.limit);var s=t.extend(c,n.where);n.contentType&&0==n.contentType.indexOf("application/json")&&(s=JSON.stringify(s)),t.ajax({type:n.method||"get",url:n.url,contentType:n.contentType,data:s,dataType:"json",headers:n.headers||{},success:function(t){if(n.pageable)t[o.statusName]!=o.statusCode?(i.renderForm(),i.layMain.html('<div class="'+f+'">'+(t[o.msgName]||"返回的数据状态异常")+"</div>")):(i.renderData(t,e,t[o.countName]),d(),n.time=(new Date).getTime()-i.startTime+" ms");else{var r={},c=0;r[o.dataName]=t.concat().splice(c,n.limit),r[o.countName]=t.length,i.renderData(r,e,r.length),d(),"function"==typeof n.done&&n.done(r,e,r[o.countName])}a&&l.close(a),"function"==typeof n.done&&n.done(t,e,t[o.countName])},error:function(e,t){i.layMain.html('<div class="'+f+'">数据接口请求异常</div>'),i.renderForm(),a&&l.close(a)}})}else if(n.data&&n.data.constructor===Array){var h={},u=e*n.limit-n.limit;h[o.dataName]=n.data.concat().splice(u,n.limit),h[o.countName]=n.data.length,i.renderData(h,e,n.data.length),d(),"function"==typeof n.done&&n.done(h,e,h[o.countName])}},j.prototype.genUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)})},j.prototype.eachCols=function(e){var a=t.extend(!0,[],this.config.cols),i=[],l=0;layui.each(a,function(e,t){layui.each(t,function(t,n){if(n.colspan>1){var r=0;l++,n.CHILD_COLS=[],layui.each(a[e+1],function(e,t){t.PARENT_COL||r==n.colspan||(t.PARENT_COL=l,n.CHILD_COLS.push(t),r+=t.colspan>1?t.colspan:1)})}n.PARENT_COL||i.push(n)})});var n=function(t){layui.each(t||i,function(t,a){return a.CHILD_COLS?n(a.CHILD_COLS):void e(t,a)})};n()},j.prototype.getGroupLength=function(e,t){var a=0;if(void 0==t||0==t.length)return a;var i=void 0;e.merge instanceof Object&&e.merge.referField&&(i=t[0][e.merge.referField]);var l=t[0][e.field];if(void 0==l)return a;for(var n=0;n<t.length;n++){if(void 0!=i){if(t[n][e.field]!=l||t[n][e.merge.referField]!=i)break}else if(t[n][e.field]!=l)break;a++}return a},j.prototype.renderData=function(e,n,r,o){var c=this,s=c.config,h=e[s.response.dataName]||[],y=[],p=[],m=[],v=function(){return!o&&c.sortKey?c.sort(c.sortKey.field,c.sortKey.sort,!0):(layui.each(h,function(e,i){if(i&&i[E]&&i[E]==M);else{var l=[],r=[],h=[],u=e+s.limit*(n-1)+1;if(0===i.length)return;o||(i[d.config.indexName]=e),c.eachCols(function(e,n){if(void 0!=n.field||"normal"!=n.type){var o=n.field||e,f=i[o];c.getColElem(c.layHeader,o);if(void 0!==f&&null!==f||(f=""),!(n.colspan>1)){var y=1;n.merge&&n.field&&i[n.field+S]&&1!=i[n.field+S]&&(y=i[n.field+S]);var p=['<td data-field="'+o+'" '+function(){var e=[];return n.edit&&e.push('data-edit="'+n.edit+'"'),n.align&&e.push('align="'+n.align+'"'),n.templet&&e.push('data-content="'+f+'"'),n.toolbar&&e.push('data-off="true"'),n.event&&e.push('lay-event="'+n.event+'"'),n.style&&e.push('style="'+n.style+'"'),n.minWidth&&e.push('data-minwidth="'+n.minWidth+'"'),n.dataType&&e.push('data-datatype="'+n.dataType+'"'),1!=y&&e.push('rowspan="'+y+'"'),e.join(" ")}()+">",'<div class="layui-table-cell laytable-cell-'+function(){var e=s.index+"-"+o;return"normal"===n.type?e:e+" laytable-cell-"+n.type}()+'">'+function(){var e=t.extend(!0,{LAY_INDEX:u},i);if("checkbox"===n.type)return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){var t=d.config.checkName;return n[t]?(i[t]=n[t],n[t]?"checked":""):e[t]?"checked":""}()+">";if("numbers"===n.type)return u;if("checkbox_control"===n.type)return'<input type="checkbox" name="layTableCheckbox_Control"  lay-skin="primary" lay-filter="layTableCheckbox_Control"'+function(){return"1"==e[n.field]?"checked":""}()+">";if("number_control"===n.type)return'<input type="number" name="layTableNumber_Control" class="layui-input '+N+'" lay-ignore  value="'+function(){return e[n.field]||""}()+'">';if("dropdown_control"===n.type){if(!n.config||!n.config.data)return void lay.hint("未配置表格下拉数据源选项!");for(var l=new Array,r=n.config.name||"name",o=n.config.value||"value",c=0;c<n.config.data.length;c++)e[n.field]==n.config.data[c][o]?l.push('<option value="'+n.config.data[c][o]+'" selected>'+n.config.data[c][r]+"</option>"):l.push('<option value="'+n.config.data[c][o]+'">'+n.config.data[c][r]+"</option>");return'<select  class="'+N+'" lay-ignore >'+l.join("")+"</select>"}return"textbox_control"===n.type?'<input type="text" name="layTableNumber_Control" maxlength="100" class="layui-input '+N+'" lay-ignore  value="'+function(){return e[n.field]||""}()+'">':n.toolbar?a(t(n.toolbar).html()||"").render(e):n.templet?function(){return"function"==typeof n.templet?n.templet(e):a(t(n.templet).html()||String(f)).render(e)}():f}(),"</div></td>"].join("");void 0==n.merge?(l.push(p),n.fixed&&"right"!==n.fixed&&r.push(p),"right"===n.fixed&&h.push(p)):n.merge&&n.field&&void 0==i[n.field+S]?(l.push(p),n.fixed&&"right"!==n.fixed&&r.push(p),"right"===n.fixed&&h.push(p)):n.merge&&n.field&&i[n.field+S]&&1!=i[n.field+S]&&(l.push(p),n.fixed&&"right"!==n.fixed&&r.push(p),"right"===n.fixed&&h.push(p))}}}),y.push('<tr data-index="'+e+'">'+l.join("")+"</tr>"),p.push('<tr data-index="'+e+'">'+r.join("")+"</tr>"),m.push('<tr data-index="'+e+'">'+h.join("")+"</tr>")}}),c.layBody.scrollTop(0),c.layMain.find("."+f).remove(),c.layMain.find("tbody").html(y.join("")),c.layFixLeft.find("tbody").html(p.join("")),c.layFixRight.find("tbody").html(m.join("")),c.renderForm(),c.syncCheckAll(),c.haveInit?c.scrollPatch():setTimeout(function(){c.scrollPatch()},50),c.haveInit=!0,void l.close(c.tipsIndex))};if(c.key=s.id||s.index,d.cache[c.key]=h,d.cache[c.key]&&d.cache[c.key].length>0)for(var g=0;g<d.cache[c.key].length;g++)d.cache[c.key][g][A]=c.genUUID();return d.cache[c.key]&&d.cache[c.key].length>0&&c.eachCols(function(e,t){if(t.merge)for(var a=0,i=0,e=0;e<d.cache[c.key].length;e++)0==a?(i=c.getGroupLength(t,d.cache[c.key].slice(e)),1!=i&&(d.cache[c.key][e][t.field+S]=i)):d.cache[c.key][e][t.field+S]=1,a++,a==i&&(a=0,i=0)}),c.layPage[0===h.length&&1==n?"addClass":"removeClass"](u),o?v():0===h.length?(c.renderForm(),c.layFixed.remove(),c.layMain.find("tbody").html(""),c.layMain.find("."+f).remove(),c.layMain.append('<div class="'+f+'">'+s.text.none+"</div>")):(v(),void(s.page&&(s.page=t.extend({elem:"layui-table-page"+s.index,count:r,limit:s.limit,limits:s.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(c.page=e.curr,s.limit=e.limit,c.pullData(e.curr,c.loading()))}},s.page),s.page.count=r,i.render(s.page))))},j.prototype.getColElem=function(e,t){var a=this,i=a.config;return e.eq(0).find(".laytable-cell-"+(i.index+"-"+t)+":eq(0)")},j.prototype.renderForm=function(e){n.render(e,"LAY-table-"+this.index)},j.prototype.sort=function(e,a,i,l){var n,o,c=this,h={},u=c.config,f=u.elem.attr("lay-filter"),y=d.cache[c.key];"string"==typeof e&&c.layHeader.find("th").each(function(a,i){var l=t(this),r=l.data("field");if(r===e)return e=l,n=r,!1});try{var n=n||e.data("field");if(c.sortKey&&!i&&n===c.sortKey.field&&a===c.sortKey.sort)return;var p=c.layHeader.find("th .laytable-cell-"+u.index+"-"+n).find(w);c.layHeader.find("th").find(w).removeAttr("lay-sort"),p.attr("lay-sort",a||null),c.layFixed.find("th")}catch(m){return r.error("Table modules: Did not match to field")}c.sortKey={field:n,sort:a},"asc"===a?o=layui.sort(y,n):"desc"===a?o=layui.sort(y,n,!0):(o=layui.sort(y,d.config.indexName),delete c.sortKey),h[u.response.dataName]=o,c.renderData(h,c.page,c.count,!0),l&&layui.event.call(e,s,"sort("+f+")",{field:n,type:a})},j.prototype.loading=function(){var e=this,t=e.config;if(t.loading&&t.url)return l.msg("数据请求中",{icon:16,offset:[e.elem.offset().top+e.elem.height()/2-35-z.scrollTop()+"px",e.elem.offset().left+e.elem.width()/2-90-z.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1})},j.prototype.setCheckData=function(e,t){var a=this,i=a.config,l=d.cache[a.key];l[e]&&l[e].constructor!==Array&&(l[e][i.checkName]=t)},j.prototype.syncCheckAll=function(){var e=this,t=e.config,a=e.layHeader.find('input[name="layTableCheckbox"]'),i=function(a){return e.eachCols(function(e,i){"checkbox"===i.type&&(i[t.checkName]=a)}),a};a[0]&&(d.checkStatus(e.key).isAll?(a[0].checked||(a.prop("checked",!0),e.renderForm("checkbox")),i(!0)):(a[0].checked&&(a.prop("checked",!1),e.renderForm("checkbox")),i(!1)))},j.prototype.getCssRule=function(e,t){var a=this,i=a.elem.find("style")[0],l=i.sheet||i.styleSheet||{},n=l.cssRules||l.rules;layui.each(n,function(i,l){if(l.selectorText===".laytable-cell-"+a.index+"-"+e)return t(l),!0})},j.prototype.fullSize=function(){var e,t=this,a=t.config,i=a.height;t.fullHeightGap&&(i=z.height()-t.fullHeightGap,i<135&&(i=135),t.elem.css("height",i)),e=parseFloat(i)-parseFloat(t.layHeader.height())-1,a.toolbar&&(e-=t.layTool.outerHeight()),a.page&&(e=e-t.layPage.outerHeight()-1),t.layMain.css("height",e)},j.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:(e=document.createElement("div"),e.style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},j.prototype.scrollPatch=function(){var e=this,a=e.layMain.children("table"),i=e.layMain.width()-e.layMain.prop("clientWidth"),l=e.layMain.height()-e.layMain.prop("clientHeight"),n=e.getScrollWidth(e.layMain[0]),r=a.outerWidth()-e.layMain.width();if(e.autoColNums&&r<5&&!e.scrollPatchWStatus){var o=e.layHeader.eq(0).find("thead th:last-child"),d=o.data("field");e.getCssRule(d,function(t){var a=t.style.width||o.outerWidth();t.style.width=parseFloat(a)-n-r+"px",e.layMain.height()-e.layMain.prop("clientHeight")>0&&(t.style.width=parseFloat(t.style.width)-1+"px"),e.scrollPatchWStatus=!0})}if(i&&l){if(!e.elem.find(".layui-table-patch")[0]){var c=t('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');c.find("div").css({width:i}),e.layHeader.eq(0).find("thead tr").append(c)}}else e.layHeader.eq(0).find(".layui-table-patch").remove();var s=e.layMain.height(),h=s-l;e.layFixed.find(m).css("height",a.height()>h?h:"auto"),e.layFixRight[r>0?"removeClass":"addClass"](u),e.layFixRight.css("right",i-1)},j.prototype.events=function(){var e,i=this,n=i.config,c=t("body"),h={},u=i.layHeader.find("th"),f=".layui-table-cell",y=n.elem.attr("lay-filter");u.on("mousemove",function(e){var a=t(this),i=a.offset().left,l=e.clientX-i;a.attr("colspan")>1||a.data("unresize")||h.resizeStart||(h.allowResize=a.width()-l<=10,c.css("cursor",h.allowResize?"col-resize":""))}).on("mouseleave",function(){t(this);h.resizeStart||c.css("cursor","")}).on("mousedown",function(e){var a=t(this);if(h.allowResize){var l=a.data("field");e.preventDefault(),h.resizeStart=!0,h.offset=[e.clientX,e.clientY],i.getCssRule(l,function(e){var t=e.style.width||a.outerWidth();h.rule=e,h.ruleWidth=parseFloat(t),h.minWidth=a.data("minwidth")||n.cellMinWidth})}}),Y.on("mousemove",function(t){if(h.resizeStart){if(t.preventDefault(),h.rule){var a=h.ruleWidth+t.clientX-h.offset[0];a<h.minWidth&&(a=h.minWidth),h.rule.style.width=a+"px",l.close(i.tipsIndex)}e=1}}).on("mouseup",function(t){h.resizeStart&&(h={},c.css("cursor",""),i.scrollPatch()),2===e&&(e=null)}),u.on("click",function(){var a,l=t(this),n=l.find(w),r=n.attr("lay-sort");return n[0]&&1!==e?(a="asc"===r?"desc":"desc"===r?null:"asc",void i.sort(l,a,null,!0)):e=2}).find(w+" .layui-edge ").on("click",function(e){var a=t(this),l=a.index(),n=a.parents("th").eq(0).data("field");layui.stope(e),0===l?i.sort(n,"asc",null,!0):i.sort(n,"desc",null,!0)}),i.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=t(this).prev(),a=i.layBody.find('input[name="layTableCheckbox"]'),l=e.parents("tr").eq(0).data("index"),n=e[0].checked,r="layTableAllChoose"===e.attr("lay-filter");r?(a.each(function(e,t){t.checked=n,i.setCheckData(e,n)}),i.syncCheckAll(),i.renderForm("checkbox")):(i.setCheckData(l,n),i.syncCheckAll()),layui.event.call(this,s,"checkbox("+y+")",{checked:n,data:d.cache[i.key]?d.cache[i.key][l]||{}:{},type:r?"all":"one"})}),i.layBody.on("mouseenter","tr",function(){var e=t(this),a=e.index();i.layBody.find("tr:eq("+a+")").addClass(T)}).on("mouseleave","tr",function(){var e=t(this),a=e.index();i.layBody.find("tr:eq("+a+")").removeClass(T)}),i.layBody.on("change","."+D,function(){var e=t(this),a=this.value,l=e.parent().data("field"),n=e.parents("tr").eq(0).data("index"),r=e.parent().data("datatype"),o=d.cache[i.key][n];if(this.tagName&&"SELECT"==this.tagName.toUpperCase())o[l]=t(this).val(),o[l+"_SHOWNAME"]=t(this).children(":selected").text();else{if(r)if("date"==r){if(void 0==moment||null==moment)return void lay.hint("表格时间日期校验需要依赖moment.js,请添加相关引用!");if(!moment(this.value,"YYYY-MM-DD",!0).isValid())return}else{if("datetime"==r&&!moment(this.value,"YYYY-MM-DD HH:mm:ss",!0).isValid())return;if("number"==r&&!t.isNumeric(this.value))return}o[l]=a}void 0==i.config.changedData&&(i.config.changedData=new Array),void 0==i.config.changedData[n]&&(i.config.changedData[n]={}),t.extend(!0,i.config.changedData[n],o),layui.event.call(this,s,"edit("+y+")",{value:a,data:o,field:l})}).on("blur","."+D,function(){var e,l=t(this),n=l.parent().data("field"),r=l.parents("tr").eq(0).data("index"),o=l.parent().data("datatype"),c=d.cache[i.key][r];if(i.eachCols(function(t,a){a.field==n&&a.templet&&(e=a.templet)}),"SELECT"==this.tagName.toUpperCase()){var s=t(this).children(":selected").text();l.siblings(f).html(s)}else{if(o)if("date"==o){if(void 0==moment||null==moment)return lay.hint("表格时间日期校验需要依赖moment.js,请添加相关引用!"),void l.remove();if(!moment(this.value,"YYYY-MM-DD",!0).isValid())return void l.remove()}else{if("datetime"==o&&!moment(this.value,"YYYY-MM-DD HH:mm:ss",!0).isValid())return void l.remove();if("number"==o&&!t.isNumeric(this.value))return void l.remove()}l.siblings(f).html(e?a(t(e).html()||this.value).render(c):this.value),l.parent().data("content",this.value)}l.remove()}),i.layBody.on("change","."+N,function(){var e=t(this),a=this.value,l=e.parent().data("field")||e.parent().parent().data("field"),n=e.parents("tr").eq(0).data("index"),r=(e.parent().data("datatype"),d.cache[i.key][n]);if(this.tagName&&"SELECT"==this.tagName.toUpperCase())if(void 0!=r[l+S]&&1!=r[l+S])for(var o=n;o<n+r[l+S];o++)d.cache[i.key][o][l]=e.val(),d.cache[i.key][o][E]=_,layui.event.call(this,s,"edit("+y+")",{value:e.val(),data:d.cache[i.key][o],field:l});else r[E]=_,r[l]=e.val(),layui.event.call(this,s,"edit("+y+")",{value:e.val(),data:r,field:l});else if(void 0!=r[l+S]&&1!=r[l+S])for(var o=n;o<n+r[l+S];o++)d.cache[i.key][o][l]=a,d.cache[i.key][o][E]=_,layui.event.call(this,s,"edit("+y+")",{value:a,data:d.cache[i.key][o],field:l});else r[l]=a,r[E]=_,layui.event.call(this,s,"edit("+y+")",{value:a,data:r,field:l});layui.event.call(this,s,"refresh("+y+")",{value:a,data:r,field:l})}).on("blur","."+N,function(){var e,a=t(this),l=a.parent().data("field"),n=a.parents("tr").eq(0).data("index");a.parent().data("datatype"),d.cache[i.key][n];i.eachCols(function(t,a){a.field==l&&a.templet&&(e=a.templet)})}),layui.form.on("checkbox(layTableCheckbox_Control)",function(){var e=t(this),a=("on"==this.value?1:0,e.parent().data("field")||e.parent().parent().data("field")),l=e.parents("tr").eq(0).data("index"),n=(e.parent().data("datatype"),d.cache[i.key][l]);void 0!=n[a]&&(0==n[a]?(n[a]=1,n[E]=_):(n[a]=0,n[E]=_))}),i.layBody.on("click","td",function(){var e=t(this),a=e.data("field"),n=e.data("edit"),d=(e.parents("tr").eq(0).data("index"),e.children(f));if(l.close(i.tipsIndex),!e.data("off"))if(n)if("select"===n)if(void 0!=i.config.originalData){for(var c=i.config.originalData,s=new Array,h={},u=new Array,y=a+"_SHOWNAME",p=this.textContent,m=0;m<c.length;m++)if(void 0!=c[m][a]&&void 0!=c[m][y]&&u.indexOf(c[m][y])==-1){u.push(c[m][y]);var v={};v[a]=c[m][a],v[y]=c[m][y],h[c[m][y]]=v}u.sort(function(e,t){return e.localeCompare(t)}),s.push("<option></option>");for(var m=0;m<u.length;m++)if(void 0!=h[u[m]][a]&&void 0!=h[u[m]][y]){var g="<option value='"+h[u[m]][a]+"'>"+h[u[m]][y]+"</option>";p==h[u[m]][y]&&(g="<option selected value='"+h[u[m]][a]+"'>"+h[u[m]][y]+"</option>"),s.indexOf(g)==-1&&s.push(g)}var x=t('<select class="'+D+'" lay-ignore>'+s.join(" ")+"</select>");e.find("."+D)[0]||e.append(x),x.focus()}else r.error("表格下拉选项未配置数据源!");else{var b=t('<input class="layui-input '+D+'">');b[0].value=e.data("content")||d.text(),e.find("."+D)[0]||e.append(b),b.focus()}else d.find(".layui-form-switch,.layui-form-checkbox")[0]||Math.round(d.prop("scrollWidth"))>Math.round(d.outerWidth())&&(i.tipsIndex=l.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(d.height()+16)+"px;"+function(){return s&&"sm"===s.size?"padding: 4px 15px; font-size: 12px;":s&&"lg"===s.size?"padding: 14px 15px;":""}()+'">',d.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),d[0],{tips:[3,""],time:-1,anim:-1,maxWidth:o.ios||o.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){l.close(t)})}}))}),i.layBody.on("click","*[lay-event]",function(){var e=t(this),l=e.parents("tr").eq(0).data("index"),n=i.layBody.find('tr[data-index="'+l+'"]'),r="layui-table-click",o=d.cache[i.key][l];layui.event.call(this,s,"tool("+y+")",{data:d.clearCacheKey(o),event:e.attr("lay-event"),tr:n,del:function(){d.cache[i.key][l]=[],n.remove(),i.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(e,l){if(e in o){var r,d=n.children('td[data-field="'+e+'"]');o[e]=l,i.eachCols(function(t,a){a.field==e&&a.templet&&(r=a.templet)}),d.children(f).html(r?a(t(r).html()||l).render(o):l),d.data("content",l)}})}}),n.addClass(r).siblings("tr").removeClass(r)}),i.layMain.on("scroll",function(){var e=t(this),a=e.scrollLeft(),n=e.scrollTop();i.layHeader.scrollLeft(a),i.layFixed.find(m).scrollTop(n),l.close(i.tipsIndex)}),z.on("resize",function(){i.fullSize(),i.scrollPatch()})},d.init=function(e,a){a=a||{};var i=this,l=t(e?'table[lay-filter="'+e+'"]':h+"[lay-data]"),n="Table element property lay-data configuration item has a syntax error: ";return l.each(function(){var i=t(this),l=i.attr("lay-data");try{l=new Function("return "+l)()}catch(o){r.error(n+l)}var c=[],s=t.extend({elem:this,cols:[],data:[],skin:i.attr("lay-skin"),size:i.attr("lay-size"),even:"string"==typeof i.attr("lay-even")},d.config,a,l);e&&i.hide(),i.find("thead>tr").each(function(e){s.cols[e]=[],t(this).children().each(function(a){var i=t(this),l=i.attr("lay-data");try{l=new Function("return "+l)()}catch(o){return r.error(n+l)}var d=t.extend({title:i.text(),colspan:i.attr("colspan")||0,rowspan:i.attr("rowspan")||0},l);d.colspan<2&&c.push(d),s.cols[e].push(d)})}),i.find("tbody>tr").each(function(e){var a=t(this),i={};a.children("td").each(function(e,a){var l=t(this),n=l.data("field");if(n)return i[n]=l.html()}),layui.each(c,function(e,t){var l=a.children("td").eq(e);i[t.field]=l.html()}),s.data[e]=i}),d.render(s)}),i},d.checkStatus=function(e){var t=0,a=0,i=[],l=d.cache[e]||[];return layui.each(l,function(e,l){return l.constructor===Array?void a++:void(l[d.config.checkName]&&(t++,i.push(d.clearCacheKey(l))))}),{data:i,isAll:!!l.length&&t===l.length-a}},c.config={},d.reload=function(e,a){var i=c.config[e];return void 0!=i&&0==i.pageable&&(i.limit=1e8),a=a||{},i?(a.data&&a.data.constructor===Array&&delete i.data,d.render(t.extend(!0,{},i,a))):r.error("The ID option was not found in the table instance")},d.getData=function(e){return d.cache[e]||new Array},d.getChangedData=function(e){var t=new Array;if(void 0==d.cache[e])return t;for(var a=0;a<d.cache[e].length;a++)void 0!=d.cache[e][a][E]&&t.push(d.cache[e][a]);return t},d.addRow=function(e,t){void 0==d.cache[e]&&(d.cache[e]=new Array),void 0==t&&(t={}),t[E]=H,d.cache[e].push(t),d.reload(e,{data:d.cache[e],url:""})},d.deleteRows=function(e,t){if(t instanceof Array){for(var a=0;a<t.length;a++)for(var i=0;i<d.cache[e].length;i++)if(void 0!=d.cache[e][i][A]&&d.cache[e][i][A]==t[a]){d.cache[e][i][E]=M,void 0!=d.cache[e][i].LAY_CHECKED&&(d.cache[e][i].LAY_CHECKED=!1);break}d.reload(e,{data:d.cache[e],url:""})}},d.deleteRow=function(e,t){if(void 0!=e&&void 0!=t&&void 0!=d.cache[e]){for(var a=0;a<d.cache[e].length;a++)if(void 0!=d.cache[e][a][A]&&d.cache[e][a][A]==t){d.cache[e][a][E]=M,void 0!=d.cache[e][a].LAY_CHECKED&&(d.cache[e][a].LAY_CHECKED=!1);break}d.reload(e,{data:d.cache[e],url:""})}},d.render=function(e){var t=new j(e);return c.call(t)},d.clearCacheKey=function(e){return e=t.extend({},e),delete e[d.config.checkName],delete e[d.config.indexName],e},d.init(),e(s,d)});