var cancelkeyWordUrl=ECS.api.apUrl+"/AutomaticMonitoring/getKeywordReList?keyWordreCode=AP_AC_RFC_R";window.pageLoadMode=PageLoadMode.None;$(function(){var a=parent.layer.getFrameIndex(window.name);var b={init:function(){this.bindUI();b.logic.cbxCancelWord()},bindUI:function(){$("#btnSave").click(function(){b.logic.save()});$(".btnClose").click(function(){parent.cancelReason="";b.logic.closeLayer(false)})},logic:{data:{reason_dt:{}},setData:function(c){$("#title-main").text(c.title)},cbxCancelWord:function(){ECS.ui.getCombobox("cancelWord",cancelkeyWordUrl,{selectValue:"请选择",keyField:"keyWord",valueField:"keyWord",},null,b.logic.cbxCancelReason)},cbxCancelReason:function(){if($("#cancelWord").val()=="请选择"){return}var c=$("#cancelWord").val();if(b.logic.data.reason_dt[c]){return}else{b.logic.data.reason_dt[c]=true;var e=[];for(var d in b.logic.data.reason_dt){e.push(d)}$("#infoCancel").val(e.join(" "));e=[]}},save:function(){$("#infoCancel").val($.trim($("#infoCancel").val()));b.logic.formValidate();if(!$("#AddOrEditModal").valid()){return}parent.cancelReason=$.trim($("#infoCancel").val());b.logic.closeLayer(true)},closeLayer:function(c){window.parent.pageLoadMode=window.pageLoadMode;parent.layer.close(a)},formValidate:function(){ECS.form.formValidate("AddOrEditModal",{rules:{infoCancel:{required:true}}})}}};b.init();window.page=b});