var detailUrl=ECS.api.apUrl+"/fileAlarmChild/singlePoliceRecord";var vm=new Vue({el:"#main",data:{items:[],selectedItem:[],eventId:"",detail:{},records:{},recordsFileName:""},methods:{returnJson:function(a){return JSON.stringify(a)}}});$(function(){var a={init:function(){mini.parse();this.bindUI();a.logic.initPage()},table:{},bindUI:function(){$(".btnClose").click(function(){window.pageLoadMode=PageLoadMode.None;a.logic.closeLayer(false)})},data:{param:{}},logic:{setData:function(b){vm.eventId=b;a.logic.initPage(b)},initPage:function(b){$.ajax({url:detailUrl+"?eventId="+b,type:"get",success:function(e){vm.detail=a.logic.Convert(e);vm.records=parent.getRecordsForP(b);for(var d=0,c=vm.records.length;d<c;d++){vm.recordsFileName=vm.records[d].filename+".wav</br>"}},error:function(c){}})},WFDetail:function(){var b="auto";var c=vm.detail.eventSummary;layer.open({type:1,area:["40%","30%"],title:"案件详情",offset:b,id:"layerDemo"+b,content:'<div style="padding: 20px 100px;">'+c+"</div>",btn:"关闭",btnAlign:"c",shade:0,yes:function(){layer.closeAll()}})},Detail:function(b){layer.open({type:2,closeBtn:1,area:["80%","80%"],skin:"new-class",shadeClose:false,title:"详情",content:"../FiremanGo/task.html?eventId="+b.eventID+"&teamId="+b.teamID+"&batchId="+b.firemanGoBatch+"&readonly=true&r="+Math.random(),success:function(c,d){},end:function(){}})},Convert:function(b){if(b.alarmTime){b.alarmTime=moment(b.alarmTime).format("YYYY-MM-DD HH:mm:ss")}if(b.initTime){b.initTime=moment(b.initTime).format("YYYY-MM-DD HH:mm:ss")}if(b.commandTime){b.commandTime=moment(b.commandTime).format("YYYY-MM-DD HH:mm:ss")}if(b.registerTime){b.registerTime=moment(b.registerTime).format("YYYY-MM-DD HH:mm:ss")}if(b.completeTime){b.completeTime=moment(b.completeTime).format("YYYY-MM-DD HH:mm:ss")}b.teamEntities.forEach(function(c){if(c.printingTime){c.printingTime=moment(c.printingTime).format("YYYY-MM-DD HH:mm:ss")}if(c.handleTime){c.handleTime=moment(c.handleTime).format("YYYY-MM-DD HH:mm:ss")}});return b},closeLayer:function(c){parent.resetAnswerStatus();var b=parent.layer.getFrameIndex(window.name);parent.layer.close(b)}}};a.init();window.page=a});