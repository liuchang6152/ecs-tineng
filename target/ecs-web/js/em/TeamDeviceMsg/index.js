var delUrl=ECS.api.emUrl+"/DispatchDeviceConfig";var searchUrl=ECS.api.emUrl+"/DispatchDeviceConfig";var riskArea_url=ECS.api.bcUrl+"/riskArea/allRiskArea";window.pageLoadMode=PageLoadMode.None;$(function(){var a={init:function(){mini.parse();this.bindUI();$("#searchForm").find("input").val("");a.logic.initTable()},table:{},bindUI:function(){$("input").blur(function(){$(this).val($.trim($(this).val()))});$("#btnSelectAll").click(function(){a.logic.selectAll(grid1,grid2)});$("#turnSelectAll").click(function(){a.logic.selectAll(grid3,grid4)});$("#btnMoveAll").click(function(){a.logic.removeAll(grid2)});$("#turnMoveAll").click(function(){a.logic.removeAll(grid4)});$("#btnSave").click(function(){a.logic.removeAll(grid2)});$("#btnTurnSave").click(function(){a.logic.removeAll(grid4)});$("#msg").change(function(){var b=$("#autoMsg").val()+"　";if(this.value!=0){b+=$("#msg").find("option:selected").text()+"　"}$(this).find("option:first").attr("selected","selected");$("#autoMsg").val(b)});$("#nums").change(function(){if(this.value==0){$("#autoNum").show()}else{$("#autoNum").hide()}});$("#autoNum").bind("change",function(){if($("#autoNum").val()<11){layer.msg("请输入大于10的正整数")}})},data:{param:{}},logic:{initTable:function(d,c){grid1=mini.get("noSelect");grid2=mini.get("haveSelect");grid3=mini.get("turnSelect");grid4=mini.get("haveSelectTurn");var f={hasPrePage:false,hasNextPage:true,id:null,status:0,total:11,totalCount:11,pageList:[{cfgID:1205,deviceID:3,deviceIDList:null,deviceE:{crtDate:1550646579000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1550646579000,mntUserId:"ces",mntUserName:"ces",inUse:1,inUseShow:"是",deviceId:3,deviceName:"播音喇叭1",deviceCatgId:1003,deviceCatgName:"消息类",deviceTypeId:1014,deviceTypeName:"现场播音喇叭",drtDeptName:"常减压-高杆",deviceNumber:"33445",activationPattern:0,ipAddress:"testadd",remark:"remk",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1205,deviceID:3,deviceIDList:null,deviceE:{crtDate:1550646579000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1550646579000,mntUserId:"ces",mntUserName:"ces",inUse:1,inUseShow:"是",deviceId:3,deviceName:"播音喇叭2",deviceCatgId:1003,deviceCatgName:"消息类",deviceTypeId:1014,deviceTypeName:"现场播音喇叭",drtDeptName:"常减压-高杆",deviceNumber:"33445",activationPattern:0,ipAddress:"testadd",remark:"remk",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1205,deviceID:3,deviceIDList:null,deviceE:{crtDate:1550646579000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1550646579000,mntUserId:"ces",mntUserName:"ces",inUse:1,inUseShow:"是",deviceId:3,deviceName:"播音喇叭3",deviceCatgId:1003,deviceCatgName:"消息类",deviceTypeId:1014,deviceTypeName:"现场播音喇叭",drtDeptName:"常减压-高杆",deviceNumber:"33445",activationPattern:0,ipAddress:"testadd",remark:"remk",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1205,deviceID:3,deviceIDList:null,deviceE:{crtDate:1550646579000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1550646579000,mntUserId:"ces",mntUserName:"ces",inUse:1,inUseShow:"是",deviceId:3,deviceName:"播音喇叭4",deviceCatgId:1003,deviceCatgName:"消息类",deviceTypeId:1014,deviceTypeName:"现场播音喇叭",drtDeptName:"常减压-高杆",deviceNumber:"33445",activationPattern:0,ipAddress:"testadd",remark:"remk",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1205,deviceID:3,deviceIDList:null,deviceE:{crtDate:1550646579000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1550646579000,mntUserId:"ces",mntUserName:"ces",inUse:1,inUseShow:"是",deviceId:3,deviceName:"播音喇叭5",deviceCatgId:1003,deviceCatgName:"消息类",deviceTypeId:1014,deviceTypeName:"现场播音喇叭",drtDeptName:"常减压-高杆",deviceNumber:"33445",activationPattern:0,ipAddress:"testadd",remark:"remk",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1204,deviceID:1,deviceIDList:null,deviceE:{crtDate:1550641931000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1554864140000,mntUserId:"ecs006",mntUserName:"ecs006",inUse:1,inUseShow:"是",deviceId:1,deviceName:"闸门1",deviceCatgId:1002,deviceCatgName:"开关类",deviceTypeId:1013,deviceTypeName:"闸门",drtDeptName:"炼油一厂1号门",deviceNumber:"12345",activationPattern:0,ipAddress:"172.2.2.2",remark:"建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符哈放到的三个五百",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1204,deviceID:1,deviceIDList:null,deviceE:{crtDate:1550641931000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1554864140000,mntUserId:"ecs006",mntUserName:"ecs006",inUse:1,inUseShow:"是",deviceId:1,deviceName:"闸门2",deviceCatgId:1002,deviceCatgName:"开关类",deviceTypeId:1013,deviceTypeName:"闸门",drtDeptName:"炼油一厂1号门",deviceNumber:"12345",activationPattern:0,ipAddress:"172.2.2.2",remark:"建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符哈放到的三个五百",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1204,deviceID:1,deviceIDList:null,deviceE:{crtDate:1550641931000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1554864140000,mntUserId:"ecs006",mntUserName:"ecs006",inUse:1,inUseShow:"是",deviceId:1,deviceName:"闸门3",deviceCatgId:1002,deviceCatgName:"开关类",deviceTypeId:1013,deviceTypeName:"闸门",drtDeptName:"炼油一厂1号门",deviceNumber:"12345",activationPattern:0,ipAddress:"172.2.2.2",remark:"建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符哈放到的三个五百",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1204,deviceID:1,deviceIDList:null,deviceE:{crtDate:1550641931000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1554864140000,mntUserId:"ecs006",mntUserName:"ecs006",inUse:1,inUseShow:"是",deviceId:1,deviceName:"闸门4",deviceCatgId:1002,deviceCatgName:"开关类",deviceTypeId:1013,deviceTypeName:"闸门",drtDeptName:"炼油一厂1号门",deviceNumber:"12345",activationPattern:0,ipAddress:"172.2.2.2",remark:"建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符哈放到的三个五百",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null},{cfgID:1204,deviceID:1,deviceIDList:null,deviceE:{crtDate:1550641931000,crtUserId:"ecs",crtUserName:"ecs",mntDate:1554864140000,mntUserId:"ecs006",mntUserName:"ecs006",inUse:1,inUseShow:"是",deviceId:1,deviceName:"闸门5",deviceCatgId:1002,deviceCatgName:"开关类",deviceTypeId:1013,deviceTypeName:"闸门",drtDeptName:"炼油一厂1号门",deviceNumber:"12345",activationPattern:0,ipAddress:"172.2.2.2",remark:"建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字的建设名称字符测试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符测试试建设名称字符哈放到的三个五百",enterpriseID:30650700,enterpriseCode:null,deviceAssortment:0,deviceAssortmentName:"PLC",isDelete:0,sortNum:0,orgName:null,baseDataId:null,baseModelCategory:null,baseDataName:null,teamID:null,teamName:null,deviceOperationPattern:null,orgCode:null},deviceMode:1,enterpriseID:30650700,baseDataId:30650706,baseModelCategory:3,teamID:null,teamType:null,teamTypeName:"",teamPID:null,teamPIDName:null,teamName:null}],pageSize:10,totalPage:2,pageNumber:1,pageIndex:1,beginIndex:0,isBaseZero:false};ECS.hideLoading();var e=f.pageList.filter(function(g){return g.deviceE.deviceCatgName==="消息类"});var b=f.pageList.filter(function(g){return g.deviceE.deviceCatgName==="开关类"});grid1.setData(e);grid3.setData(b)},load_sidebar:function(b,c){$.ajax({url:b,type:"GET",beforeSend:function(){ECS.showLoading()},success:function(d){mini.get(c).loadList(d,"zid","orgPID");$(".breadcrumb").html("当前位置：<li class='active'>"+mini.get(c).data[0].drtDeptName+"</li>");if(mini.get(c).data[0].riskAreaID==null){mini.get(c).data[0].riskAreaID=""}a.logic.initTable();ECS.hideLoading()}})},deviceName:function(b){return b.row.deviceE.deviceName},deviceTypeName:function(b){return b.row.deviceE.deviceTypeName},drtDeptName:function(b){return b.row.deviceE.drtDeptName},show_edit:function(b){return'<a title="选择" href="javascript:window.page.logic.select(grid1,grid2)">选择</a>'},show_edits:function(b){return'<a title="选择" href="javascript:window.page.logic.select(grid3,grid4)">选择</a>'},show_del:function(b){return'<a title="删除" href="javascript:window.page.logic.removes(grid2)">删除</a>'},show_dels:function(b){return'<a title="删除" href="javascript:window.page.logic.removes(grid4)">删除</a>'},doAddItems:function(c,f){c=mini.clone(c);for(var d=c.length-1;d>=0;d--){var e=c[d];var b=f.findRow(function(g){if(g.cfgID==e.cfgID){return true}});if(b){c.removeAt(d)}}f.addRows(c)},select:function(b,d){var c=b.getSelecteds();a.logic.doAddItems(c,d)},selectAll:function(b,d){var c=b.getData();a.logic.doAddItems(c,d)},removes:function(c){var b=c.getSelecteds();c.removeRows(b)},removeAll:function(c){var b=c.getData();c.removeRows(b)},}};a.init();window.page=a});