(function(){$.fn.weixinAudio=function(b){var e=$(this);var a={autoplay:false,src:"",};function c(f){this.$context=f;this.$Audio=f.children("#media");this.Audio=this.$Audio[0];this.$audio_area=f.find("#audio_area");this.$audio_length=f.find("#audio_length");this.$audio_progress=f.find("#audio_progress");this.currentState="pause";this.time=null;this.settings=$.extend(true,a,b);this.init()}c.prototype={init:function(){var f=this;f.events();if(f.settings.src!==""){f.Audio.src=f.settings.src}if(f.settings.autoplay){f.play()}},play:function(){var f=this;if(f.currentState==="play"){f.pause();return}f.Audio.play();clearInterval(f.timer);f.timer=setInterval(f.run.bind(f),50);f.currentState="play";f.$audio_area.addClass("playing")},pause:function(){var f=this;f.Audio.pause();f.currentState="pause";clearInterval(f.timer);f.$audio_area.removeClass("playing")},stop:function(){},events:function(){var f=this;var g;f.$audio_area.on("click",function(){f.play();if(!g){f.updateTotalTime();g=true}});f.$Audio.on("canplay",function(){f.updateTotalTime()})},run:function(){var f=this;f.animateProgressBarPosition();if(f.Audio.ended){f.pause()}},animateProgressBarPosition:function(){var g=this,f=(g.Audio.currentTime*100/g.Audio.duration)+"%";if(f=="NaN%"){f=0+"%"}var h={width:f};console.log(f);g.$audio_progress.css(h)},getAudioSeconds:function(g){var f=this,g=g%60;g=f.addZero(Math.floor(g),2);(g<60)?g=g:g="00";return g},getAudioMinutes:function(g){var f=this,g=g/60;g=f.addZero(Math.floor(g),2);(g<60)?g=g:g="00";return g},addZero:function(g,f){var g=String(g);while(g.length<f){g="0"+g}return g},updateTotalTime:function(){var f=this,i=f.Audio.duration,h=f.getAudioMinutes(i),j=f.getAudioSeconds(i),g=h+":"+j;f.$audio_length.text(g)},changeSrc:function(g){var f=this;f.pause();f.Audio.src=g;f.play()},};var d={};e.each(function(f,g){d["weixinAudio"+f]=new c($(this))});return d}})(jQuery);