var context=context||(function(){var d={fadeSpeed:100,filter:function(g){},above:"auto",preventDoubleContext:true,compress:false};function a(g){d=$.extend({},d,g);$(document).on("click","html",function(){$(".dropdown-context").fadeOut(d.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})});if(d.preventDoubleContext){$(document).on("contextmenu",".dropdown-context",function(h){h.preventDefault()})}$(document).on("mouseenter",".dropdown-submenu",function(){var j=$(this).find(".dropdown-context-sub:first"),i=j.width(),h=j.offset().left,k=(i+h)>window.innerWidth;if(k){j.addClass("drop-left")}})}function c(g){d=$.extend({},d,g)}function e(o,k,m){var j=(m)?" dropdown-context-sub":"",q=d.compress?" compressed-context":"",h=$('<ul class="dropdown-menu dropdown-context'+j+q+'" id="dropdown-'+k+'"></ul>');var p=0,s="";for(p;p<o.length;p++){if(typeof o[p].divider!=="undefined"){h.append('<li class="divider"></li>')}else{if(typeof o[p].header!=="undefined"){h.append('<li class="nav-header">'+o[p].header+"</li>")}else{if(typeof o[p].href=="undefined"){o[p].href="#"}if(typeof o[p].target!=="undefined"){s=' target="'+o[p].target+'"'}if(typeof o[p].subMenu!=="undefined"){$sub=('<li class="dropdown-submenu"><a tabindex="-1" href="'+o[p].href+'">'+o[p].text+"</a></li>")}else{$sub=$('<li><a tabindex="-1" href="'+o[p].href+'"'+s+">"+o[p].text+"</a></li>")}if(typeof o[p].action!=="undefined"){var g=new Date(),n="event-"+g.getTime()*Math.floor(Math.random()*100000),l=o[p].action;$sub.find("a").attr("id",n);$("#"+n).addClass("context-event");$(document).on("click","#"+n,l)}h.append($sub);if(typeof o[p].subMenu!="undefined"){var r=e(o[p].subMenu,k,true);h.find("li:last").append(r)}}}if(typeof d.filter=="function"){d.filter(h.find("li:last"))}}return h}function f(g,i){var j=new Date(),k=j.getTime(),h=e(i,k);$("body").append(h);$(document).on("contextmenu",g,function(m){m.preventDefault();m.stopPropagation();$(".dropdown-context:not(.dropdown-context-sub)").hide();$dd=$("#dropdown-"+k);if(typeof d.above=="boolean"&&d.above){$dd.addClass("dropdown-context-up").css({top:m.pageY-20-$("#dropdown-"+k).height(),left:m.pageX-13}).fadeIn(d.fadeSpeed)}else{if(typeof d.above=="string"&&d.above=="auto"){$dd.removeClass("dropdown-context-up");var l=$dd.height()+12;if((m.pageY+l)>$("html").height()){$dd.addClass("dropdown-context-up").css({top:m.pageY-20-l,left:m.pageX-13}).fadeIn(d.fadeSpeed)}else{$dd.css({top:m.pageY+10,left:m.pageX-13}).fadeIn(d.fadeSpeed)}}}})}function b(g){$(document).off("contextmenu",g).off("click",".context-event")}return{init:a,settings:c,attach:f,destroy:b}})();